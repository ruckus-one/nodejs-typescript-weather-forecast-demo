import "reflect-metadata"

// source: partialyl copied from `cities.json`
jest.mock('../src/services/cities', () => [{"country":"AT","name":"Ybbs an der Donau","lat":"48.16667","lng":"15.08333","forecast_url":"http://127.0.0.1:3000/weather-forecast/visual-crossing-dummy/48.16667/15.08333"},{"country":"AT","name":"Stein an der Donau","lat":"48.40163","lng":"15.58102","forecast_url":"http://127.0.0.1:3000/weather-forecast/visual-crossing-dummy/48.40163/15.58102"},{"country":"AT","name":"Orth an der Donau","lat":"48.14524","lng":"16.70089","forecast_url":"http://127.0.0.1:3000/weather-forecast/visual-crossing-dummy/48.14524/16.70089"},{"country":"AT","name":"Muckendorf an der Donau","lat":"48.33183","lng":"16.1554","forecast_url":"http://127.0.0.1:3000/weather-forecast/visual-crossing-dummy/48.33183/16.1554"},{"country":"AT","name":"Marbach an der Donau","lat":"48.21667","lng":"15.15","forecast_url":"http://127.0.0.1:3000/weather-forecast/visual-crossing-dummy/48.21667/15.15"},{"country":"AT","name":"Mannsdorf an der Donau","lat":"48.152","lng":"16.66506","forecast_url":"http://127.0.0.1:3000/weather-forecast/visual-crossing-dummy/48.152/16.66506"},{"country":"AT","name":"Luftenberg an der Donau","lat":"48.27462","lng":"14.41303","forecast_url":"http://127.0.0.1:3000/weather-forecast/visual-crossing-dummy/48.27462/14.41303"},{"country":"AT","name":"Krems an der Donau","lat":"48.40921","lng":"15.61415","forecast_url":"http://127.0.0.1:3000/weather-forecast/visual-crossing-dummy/48.40921/15.61415"},{"country":"AT","name":"Kirchberg ob der Donau","lat":"48.4444","lng":"13.93805","forecast_url":"http://127.0.0.1:3000/weather-forecast/visual-crossing-dummy/48.4444/13.93805"},{"country":"AT","name":"Hainburg an der Donau","lat":"48.14627","lng":"16.94504","forecast_url":"http://127.0.0.1:3000/weather-forecast/visual-crossing-dummy/48.14627/16.94504"},{"country":"AT","name":"Feldkirchen an der Donau","lat":"48.34524","lng":"14.05134","forecast_url":"http://127.0.0.1:3000/weather-forecast/visual-crossing-dummy/48.34524/14.05134"},{"country":"AT","name":"Emmersdorf an der Donau","lat":"48.2414","lng":"15.33721","forecast_url":"http://127.0.0.1:3000/weather-forecast/visual-crossing-dummy/48.2414/15.33721"},{"country":"AT","name":"Donawitz","lat":"47.36667","lng":"15.06667","forecast_url":"http://127.0.0.1:3000/weather-forecast/visual-crossing-dummy/47.36667/15.06667"},{"country":"AT","name":"Aschach an der Donau","lat":"48.36458","lng":"14.02044","forecast_url":"http://127.0.0.1:3000/weather-forecast/visual-crossing-dummy/48.36458/14.02044"},{"country":"AT","name":"Donaustadt","lat":"48.2333","lng":"16.46002","forecast_url":"http://127.0.0.1:3000/weather-forecast/visual-crossing-dummy/48.2333/16.46002"},{"country":"BR","name":"Dona Inês","lat":"-6.61354","lng":"-35.62654","forecast_url":"http://127.0.0.1:3000/weather-forecast/visual-crossing-dummy/-6.61354/-35.62654"},{"country":"CH","name":"Donat","lat":"46.62843","lng":"9.4297","forecast_url":"http://127.0.0.1:3000/weather-forecast/visual-crossing-dummy/46.62843/9.4297"},{"country":"DE","name":"Wörth an der Donau","lat":"49.00093","lng":"12.40539","forecast_url":"http://127.0.0.1:3000/weather-forecast/visual-crossing-dummy/49.00093/12.40539"},{"country":"DE","name":"Vohburg an der Donau","lat":"48.76977","lng":"11.61845","forecast_url":"http://127.0.0.1:3000/weather-forecast/visual-crossing-dummy/48.76977/11.61845"},{"country":"DE","name":"Neustadt an der Donau","lat":"48.80705","lng":"11.76952","forecast_url":"http://127.0.0.1:3000/weather-forecast/visual-crossing-dummy/48.80705/11.76952"},{"country":"DE","name":"Neuburg an der Donau","lat":"48.73218","lng":"11.18709","forecast_url":"http://127.0.0.1:3000/weather-forecast/visual-crossing-dummy/48.73218/11.18709"},{"country":"DE","name":"Höchstädt an der Donau","lat":"48.61124","lng":"10.56816","forecast_url":"http://127.0.0.1:3000/weather-forecast/visual-crossing-dummy/48.61124/10.56816"},{"country":"DE","name":"Fridingen an der Donau","lat":"48.01955","lng":"8.92322","forecast_url":"http://127.0.0.1:3000/weather-forecast/visual-crossing-dummy/48.01955/8.92322"},{"country":"DE","name":"Donauwörth","lat":"48.71804","lng":"10.7793","forecast_url":"http://127.0.0.1:3000/weather-forecast/visual-crossing-dummy/48.71804/10.7793"},{"country":"DE","name":"Donaustauf","lat":"49.03258","lng":"12.20459","forecast_url":"http://127.0.0.1:3000/weather-forecast/visual-crossing-dummy/49.03258/12.20459"},{"country":"DE","name":"Donaueschingen","lat":"47.95514","lng":"8.49707","forecast_url":"http://127.0.0.1:3000/weather-forecast/visual-crossing-dummy/47.95514/8.49707"},{"country":"DE","name":"Dillingen an der Donau","lat":"48.58153","lng":"10.49527","forecast_url":"http://127.0.0.1:3000/weather-forecast/visual-crossing-dummy/48.58153/10.49527"},{"country":"FR","name":"Saint-Donan","lat":"48.46958","lng":"-2.88442","forecast_url":"http://127.0.0.1:3000/weather-forecast/visual-crossing-dummy/48.46958/-2.88442"},{"country":"GB","name":"Donaghadee","lat":"54.64126","lng":"-5.53591","forecast_url":"http://127.0.0.1:3000/weather-forecast/visual-crossing-dummy/54.64126/-5.53591"},{"country":"IE","name":"Donabate","lat":"53.48722","lng":"-6.15194","forecast_url":"http://127.0.0.1:3000/weather-forecast/visual-crossing-dummy/53.48722/-6.15194"},{"country":"IE","name":"Donaghmede","lat":"53.39845","lng":"-6.16179","forecast_url":"http://127.0.0.1:3000/weather-forecast/visual-crossing-dummy/53.39845/-6.16179"},{"country":"IT","name":"San Donato di Ninea","lat":"39.71156","lng":"16.04742","forecast_url":"http://127.0.0.1:3000/weather-forecast/visual-crossing-dummy/39.71156/16.04742"},{"country":"IT","name":"San Donato Val di Comino","lat":"41.70726","lng":"13.8122","forecast_url":"http://127.0.0.1:3000/weather-forecast/visual-crossing-dummy/41.70726/13.8122"},{"country":"IT","name":"San Donato Milanese","lat":"45.41047","lng":"9.26838","forecast_url":"http://127.0.0.1:3000/weather-forecast/visual-crossing-dummy/45.41047/9.26838"},{"country":"IT","name":"San Donato di Lecce","lat":"40.26728","lng":"18.18256","forecast_url":"http://127.0.0.1:3000/weather-forecast/visual-crossing-dummy/40.26728/18.18256"},{"country":"IT","name":"San Donaci","lat":"40.44853","lng":"17.92252","forecast_url":"http://127.0.0.1:3000/weather-forecast/visual-crossing-dummy/40.44853/17.92252"},{"country":"IT","name":"Donato","lat":"45.52626","lng":"7.90962","forecast_url":"http://127.0.0.1:3000/weather-forecast/visual-crossing-dummy/45.52626/7.90962"},{"country":"IT","name":"San Donato","lat":"43.70298","lng":"10.78754","forecast_url":"http://127.0.0.1:3000/weather-forecast/visual-crossing-dummy/43.70298/10.78754"},{"country":"US","name":"Donalsonville","lat":"31.04046","lng":"-84.87909","forecast_url":"http://127.0.0.1:3000/weather-forecast/visual-crossing-dummy/31.04046/-84.87909"},{"country":"US","name":"Donaldsonville","lat":"30.10103","lng":"-90.99288","forecast_url":"http://127.0.0.1:3000/weather-forecast/visual-crossing-dummy/30.10103/-90.99288"},{"country":"US","name":"McDonald","lat":"41.16367","lng":"-80.72424","forecast_url":"http://127.0.0.1:3000/weather-forecast/visual-crossing-dummy/41.16367/-80.72424"},{"country":"US","name":"McDonald","lat":"40.3709","lng":"-80.23478","forecast_url":"http://127.0.0.1:3000/weather-forecast/visual-crossing-dummy/40.3709/-80.23478"},{"country":"US","name":"Donald","lat":"45.22234","lng":"-122.83926","forecast_url":"http://127.0.0.1:3000/weather-forecast/visual-crossing-dummy/45.22234/-122.83926"}] )

import PlacesService from '../src/services/PlacesService'

describe('Places Service', () => {
    test('returns a list with default query params', () => {
        let subject = new PlacesService()
        let result = subject.listCities()

        expect(result.length).toBe(10)
    })

    test('returns a formatted list with specific query params', () => {
        let subject = new PlacesService()
        let result = subject.listCities(2,2)

        expect(result.length).toBe(2)
    })

    test('returns a result matching the search query', () => {
        let subject = new PlacesService()
        let result = subject.search('McDonald')

        expect(result.length).toBe(2)
    })
})